<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>影院热映大片_热映电影票房_高清电影影视大全-猫眼电影</title>
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="../static/css/allMovie.css">
    <link rel="stylesheet" href="../static/css/footer.css">
    <link rel="stylesheet" href="../static/css/header.css">
    <link rel="stylesheet" href="../static/layui/css/layui.css" media="all">
    <link rel="shortcut icon" href="../static/image/head.ico">

</head>
<!-- 类型 :
全部 爱情 喜剧 动画 剧情 恐怖 惊悚 科幻 动作 悬疑 犯罪 冒险 战争 奇幻 运动 家庭 古装 武侠 西部 历史 传记 歌舞 黑色电影 短片 纪录片 其他
区域 :
全部 大陆 美国 韩国 日本 中国香港 中国台湾 泰国 印度 法国 英国 俄罗斯 意大利 西班牙 德国 波兰 澳大利亚 伊朗 其他
年代 :
全部 2021 2020 2019 2018 2017 2016 2015 2014 2013 2012 2011 2000-2010 90年代 80年代 70年代 更早 -->

<body>
    <div class="header">
        <div class="header_conent header">
            <div class="header_logo">
                <a href="#">
                    <img src="../static/image/logo.jpg" alt="">
                </a>
            </div>

            <div class="header_nav">
                <ul class="header_nav_list">
                    <li>
                        <a href="#" id="index">首页</a>
                    </li>
                    <li class="first_list">
                        <a href="#" id="allMovie">电影</a>
                    </li>
                    <li>
                        <a href="#" id="allCinema">影院</a>
                    </li>
                   
                    <li>
                        <a href="#" id="top10">榜单</a>
                    </li>
                    
                </ul>
            </div>

            <div class="App_download">
                <a href="#">
                    <div class="phone_img">
                        <img src="../images/phone.png" alt="">
                    </div>
                    <div class="phone_content">App下载</div>
                    <span class="caret1"></span>
                    <div class="download_icon">
                        <p class="down_title">扫码下载APP</p>
                        <p class="down_content">选座更优惠</p>
                    </div>
                </a>
            </div>

            <div class="header_search">
                <form action="" id="searchS">
                    <select name="type" id="select">
                        <option value="movieName">电影名</option>
                        <option value="cinameName">影院名</option>
                    </select>
                    <input type="search" name="text"  class="search">
                    <button type="submit" class="submit">
                </form>
                
            </div>

            <div class="user_login">
                <a href="#">
                    <img src="../static/image/user.png" alt="">
                    <span class="caret caret1"></span>
                    <div class="user_login_menu">
                        <a class="login" href="#">登录</a>
                    </div>
                </a>
            </div>
        </div>
        </div>  
    <div class="nav-content">
        <ul class="first">
            <li id="titleOne" data-value="1">正在热映</li>
            <li id="titleTwo" data-value="2">即将上映</li>
            <li id="titleThree" data-value="3">经典影片</li>
        </ul>

    </div>
    <div class="contents">
        <div class="part1">
            <div class="province">
                <span>类型：</span>
                <ul>
                    <li>全部</li>
                    <li>喜剧</li>
                    <li>爱情</li>
                    <li>悬疑</li>
                    <li>剧情</li>
                    <li>动作</li>
                    <li>动画</li>
                    <li>青海省</li>
                    <li>家庭</li>
                    <li>青春</li>
                    <li>奇幻</li>
                    <li>战争</li>
                    <li>儿童</li>
                    <li>青海省</li>
                    <li>家庭</li>
                    <li>青春</li>
                    <li>奇幻</li>
                    <li>战争</li>
                    <li>儿童</li>
                </ul>
            </div>
            <div class="city">
                <span>区域：</span>
                <ul>
                    <li>全部</li>
                    <li>中国大陆</li>
                    <li>日本</li>
                    <li>美国</li>
                    <li>英国</li>
                    <li>法国</li>
                    <li>泰国</li>
                    <li>印度</li>
                    <li>俄罗斯</li>
                    <li>意大利</li>
                    <li>西班牙</li>
                    <li>德国</li>
                    <li>波兰</li>
                    <li>印度</li>
                    <li>俄罗斯</li>
                    <li>意大利</li>
                    <li>西班牙</li>
                    <li>德国</li>
                    <li>波兰</li>
                </ul>
            </div>
            <div class="district1">
                <span>年代：</span>
                <ul>
                    <li>全部</li>
                    <li>2021</li>
                    <li>2020</li>
                    <li>2019</li>
                    <li>2018</li>
                    <li>2017</li>
                    <li>2016</li>
                    <li>2015</li>
                    <li>2014</li>
                    <li>2013</li>
                    <li>2012</li>
                    <li>2011</li>
                    <li>2010</li>
                    <li>2015</li>
                    <li>2014</li>
                    <li>2013</li>
                    <li>2012</li>
                    <li>2011</li>
                    <li>2010</li>
                </ul>
            </div>

        </div>
        <div id="onePage">
            <div class="part2">
                <div class="choose">
                    <input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序
                    <input type="radio" name="name" id="sortTwo" class="radio" value="1">按时间排序
                </div>
                <div class="image" id="imageOne">
                </div>
            </div>
        </div>
    </div>
    <div id="test1"></div>
    <div id="test2"></div>
    <div id="test3"></div>
    <div class="footer" id="footer">
        <p class="first_links">
            关于猫眼 :
            <a href="#">关于我们</a>
            <span></span>
            <a href="#">管理团队</a>
            <span></span>
            <a href="#">投资者团队</a>

            &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;
            友情链接 :
            <a href="#">美团网</a>
            <span></span>
            <a href="#">格瓦拉</a>
            <span></span>
            <a href="#">美团下载</a>
            <span></span>
            <a href="#">欢喜首映</a>

        </p>
        <p>
            商务合作邮箱：v@maoyan.com 客服电话：10105335 违法和不良信息举报电话：4006018900
        </p>
        <p>
            用户投诉邮箱：tousujubao@meituan.com 舞弊线索举报邮箱：wubijubao@maoyan.com
        </p>
        <p>
            <a href="#">中华人民共和国增值电信业务经营许可证 京B2-20190350</a>
            <span></span>
            <a href="#">营业性演出许可证 京演（机构）（2019）4094号</a>
        </p>
        <p>
            <a href="#">广播电视节目制作经营许可证 （京）字第08478号</a>
            <span></span>
            <a href="#">网络文化经营许可证 京网文（2019）3837-369号 </a>

        </p>
        <p>
            <a href="#">猫眼用户服务协议 </a>
            <span></span>
            <a href="#">猫眼平台交易规则总则 </a>
            <span></span>
            <a href="#">隐私政策 </a>
        </p>

        <p>
            <a href="#">京公网安备11010102003232号</a>
            <span></span>
            <a href="#">京ICP备16022489号-1</a>
        </p>
        <p>
            北京猫眼文化传媒有限公司
        </p>
        <p>
            猫眼电影 maoyan.com
        </p>
        <div class="certificate">
            <a href="#">
                <img src="../static/image/footer1.png" alt="">
            </a>

            <a href="#">
                <img src="../static/image/footer2.png" alt="">
            </a>

            <a href="#">
                <img src="../static/image/footer3.png" alt="">
            </a>
        </div>
    </div>
    <script src="../node_modules/jQuery/dist/jquery.js"></script>
    <script src="../static/layui/layui.js"></script>
    <script>
        function GetTime(date) {
            var datee = new Date(date).toJSON();
            return new Date(+new Date(datee) + 8 * 3600 * 1000).toISOString().
            replace(/T/g, ' ').replace(/\.[\d]{3}Z/, '')
        }
        var userJsonStr = sessionStorage.getItem('movieStatus');
        var userEntity = JSON.parse(userJsonStr);
        console.log(userEntity.status);
        var length;
        var id;
        var page = 0;
        var page2 = 0;
        var status = userEntity.status;
        var allPage = 0;
        var allPageTwo = 0;
        var allPageThree = 0;
        if (status == 2) {
            $("#titleTwo").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });
        } else if (status == 3) {
            $("#titleThree").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });

        } else {
            $("#titleOne").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });

        }

        $.ajax({
            url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
            type: 'get',
            dataType: 'json',
            contentType: 'application/json;charset=UTF-8',
            async:false,
            success: data => {
                console.log(data);
                $('#imageOne').empty()
                var str = ``;
                for (var i = 0; i < data.length - 1; i++) {
                    str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                }
                // length = data.length - 1;
                // id = data[data.length - 1].id;
                allPage = data[data.length - 1].id + 1;
                console.log("page:" + allPage);
                // console.log(id);
                var parent = $('#imageOne');
                parent.append(str);
            },
            error: function (data) {

                var json = JSON.stringify(data);

                console.log(json);
                $('#imageOne').empty()
            }
        })

        $.ajax({
            url: `http://localhost:8080/getMoviesByStatus/2/${page}`,
            type: 'get',
            dataType: 'json',
            async:false,
            contentType: 'application/json;charset=UTF-8',
            success: data => {
                allPageTwo = data[data.length - 1].id + 1;
            }
        })
        $.ajax({
            url: `http://localhost:8080/getMoviesByStatus/3/${page}`,
            type: 'get',
            dataType: 'json',
            async:false,
            contentType: 'application/json;charset=UTF-8',
            success: data => {
                allPageThree = data[data.length - 1].id + 1;
            }
        })


        $(".first li").on('click', function () {
            page = 0;
            type = "1";
            area = "1";
            time = "1";
            sign = "0";
            $(".province li").removeClass("On");
            $(".city li").removeClass("On");
            $(".district1 li").removeClass("On");
            $(".province li:first-child").addClass("On");
            $(".city li:first-child").addClass("On");
            $(".district1 li:first-child").addClass("On");
            $(".first li").removeClass("onRed");
            $(this).addClass("onRed");
            status = $(this).attr("data-value");
            if (status == 2) {
                $("#titleTwo").addClass("onRed");
                $("#test1").css({
                    "display": "none"
                });
                $("#test3").css({
                    "display": "none"
                });
                $("#test2").css({
                    "display": "block"
                });
            } else if (status == 3) {
                $("#titleThree").addClass("onRed");
                $("#test1").css({
                    "display": "none"
                });
                $("#test3").css({
                    "display": "block"
                });
                $("#test2").css({
                    "display": "none"
                });
            } else {
                $("#titleOne").addClass("onRed");
                $("#test1").css({
                    "display": "block"
                });
                $("#test3").css({
                    "display": "none"
                });
                $("#test2").css({
                    "display": "none"
                });

            }
            layui.use('laypage', function () {
                var laypage = layui.laypage;

                laypage.render({
                    elem: 'test2' //注意，这里的 test1 是 ID，不用加 # 号
                        ,
                    count: allPageTwo * 25 //数据总数，从服务端得到
                        ,
                    theme: '#ef4238',
                    limit: 25,
                    jump: function (obj, first) {
                        //obj包含了当前分页的所有参数，比如：
                        // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                        // console.log(obj.limit); //得到每页显示的条数
                        page = obj.curr - 1;
                        console.log(page)
                        $.ajax({
                            url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                            type: 'get',
                            dataType: 'json',
                            async:false,
                            contentType: 'application/json;charset=UTF-8',
                            success: data => {
                                console.log(data);
                                $('#imageOne').empty();
                                $('.choose').empty()
                                var str = ``;
                                var str1 = ``;
                                for (var i = 0; i < data.length - 1; i++) {
                                    str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                                }
                                str1 += `<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序
                    <input type="radio" name="name" id="sortTwo" class="radio" value="1">按时间排序`;
                                var parent = $('.choose');
                                parent.append(str1);
                                // length = data.length - 1;
                                // id = data[data.length - 1].id;
                                if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                                console.log(allPageTwo + "allpage");
                                var parent = $('#imageOne');
                                parent.append(str);
                            },
                            error: function (data) {

                                var json = JSON.stringify(data);

                                console.log(json);
                                $('#imageOne').empty()
                            }
                        })

                        //首次不执行
                        if (!first) {
                            //do something
                        }
                    }
                });

                laypage.render({
                    elem: 'test3' //注意，这里的 test1 是 ID，不用加 # 号
                        ,
                    count: allPageThree * 25 //数据总数，从服务端得到
                        ,
                    theme: '#ef4238',
                    limit: 25,
                    jump: function (obj, first) {
                        //obj包含了当前分页的所有参数，比如：
                        // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                        // console.log(obj.limit); //得到每页显示的条数
                        page = obj.curr - 1;
                        console.log(page)
                        $.ajax({
                            url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                            type: 'get',
                            dataType: 'json',
                            async:false,
                            contentType: 'application/json;charset=UTF-8',
                            success: data => {
                                console.log(data);
                                $('#imageOne').empty();
                                $('.choose').empty()
                                var str = ``;
                                var str1 = ``;
                                for (var i = 0; i < data.length - 1; i++) {
                                    str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                                }
                                str1 += `<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序
                    <input type="radio" name="name" id="sortTwo" class="radio" value="1">按时间排序`;
                                var parent = $('.choose');
                                parent.append(str1);
                                // length = data.length - 1;
                                // id = data[data.length - 1].id;
                                if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                                console.log(allPageTwo + "allpage");
                                var parent = $('#imageOne');
                                parent.append(str);
                            },
                            error: function (data) {

                                var json = JSON.stringify(data);

                                console.log(json);
                                $('#imageOne').empty()
                            }
                        })

                        //首次不执行
                        if (!first) {
                            //do something
                        }
                    }
                });
                laypage.render({
                    elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号
                        ,
                    count: allPage * 25 //数据总数，从服务端得到
                        ,
                    theme: '#ef4238',
                    limit: 25,
                    jump: function (obj, first) {
                        //obj包含了当前分页的所有参数，比如：
                        // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                        // console.log(obj.limit); //得到每页显示的条数
                        page = obj.curr - 1;
                        console.log(page)
                        $.ajax({
                            url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                            type: 'get',
                            dataType: 'json',
                            async:false,
                            contentType: 'application/json;charset=UTF-8',
                            success: data => {
                                console.log(data);
                                $('#imageOne').empty();
                                $('.choose').empty()
                                var str = ``;
                                var str1 = ``;
                                for (var i = 0; i < data.length - 1; i++) {
                                    str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                                }
                                str1 += `<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序
                    <input type="radio" name="name" id="sortTwo" class="radio" value="1">按时间排序`;
                                var parent = $('.choose');
                                parent.append(str1);
                                // length = data.length - 1;
                                // id = data[data.length - 1].id;
                                if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                                console.log(allPageTwo + "allpage");
                                var parent = $('#imageOne');
                                parent.append(str);
                            },
                            error: function (data) {

                                var json = JSON.stringify(data);

                                console.log(json);
                                $('#imageOne').empty()
                            }
                        })

                        //首次不执行
                        if (!first) {
                        
                        }
                    }
                });
               
            });



        })




       

        $("#sortOne").attr("checked");
        $(".province li:first-child").addClass("On");
        $(".city li:first-child").addClass("On");
        $(".district1 li:first-child").addClass("On");
        var sign = "0"
        var type = "1";
        var area = "1";
        var time = "1";
        $("body").on("click", ".province li", function () {
            $(".province li").removeClass("On");
            $(this).addClass("On");
            
        })
        $("body").on("click", ".city li", function () {
            $(".city li").removeClass("On");
            $(this).addClass("On");
           
        })
        $("body").on("click", ".district1 li", function () {
            $(".district1 li").removeClass("On");
            $(this).addClass("On");
        })

        $("body").on('click', ".part1 li,.choose input", function () {
            if (status == 2) {
            $("#titleTwo").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });
        } else if (status == 3) {
            $("#titleThree").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });

        } else {
            $("#titleOne").addClass("onRed");
            $("#test1").css({
                "display": "block"
            });
            $("#test3").css({
                "display": "none"
            });
            $("#test2").css({
                "display": "none"
            });

        }
            
            if ($(this).parent().attr("class") == "choose") {
                sign = $(this).attr("value");
                
            }
            if ($(this).parent().parent().attr("class") == "province") {
                if ($(this).html() == "全部") {
                    type = "1"
                    sign = "0"
                } else {
                    type = $(this).html();
                    type += "1"
                    sign = "0"
                    $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/0/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    async: false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data)
                        allPage = data[data.length - 1].id + 1;
                       
                    }
                })
                }

            }
            if ($(this).parent().parent().attr("class") == "city") {
                if ($(this).html() == "全部") {
                    area = "1"
                    sign = "0"
                } else {
                    area = $(this).html();
                    area += "2"
                    sign = "0"
                    $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/0/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    async: false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data)
                        allPage = data[data.length - 1].id + 1;
                       
                    }
                })
                    
                }
            }
            if ($(this).parent().parent().attr("class") == "district1") {
                if ($(this).html() == "全部") {
                    time = "1"
                    sign = "0"
                } else {
                    time = $(this).html();
                    time += "3"
                    sign = "0"
                    $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/0/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    async: false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data)
                        allPage = data[data.length - 1].id + 1;
                       
                    }
                })
                }
            }
           
            
            
            
            if (time == "1" && area == "1" && type == "1" && sign == "0") {
                $.ajax({
                    url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                    type: 'get',
                    dataType: 'json',
                    contentType: 'application/json;charset=UTF-8',
                    async: false,
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty();
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }
                        var str = ``;
                        for (var i = 0; i < data.length - 1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                                    <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                                    <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                                    <div class="score">${data[i].movieScore}</div>
                                </div>
                            `
                        }
                        // length = data.length - 1;
                        // id = data[data.length - 1].id;
                        // console.log(id);
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                        var parent = $('#imageOne');
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                    }
                })
            }


           
            else {
                $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/${page}/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    async: false,
                    // contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty()
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }

                        var str = ``;
                        for (var i = 0; i < data.length -
                            1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                        }
                        var parent = $('#imageOne');
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                    console.log(allPage)
                                }
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                        $("#test1,#test2,#test3").css({"display":"none"});
                    }
                })
            }
            
            layui.use('laypage', function () {
            var laypage = layui.laypage;


            if(status==2){
                laypage.render({
                elem: 'test2' //注意，这里的 test1 是 ID，不用加 # 号
                    ,
                count: allPageTwo*25 //数据总数，从服务端得到
                    ,
                theme: '#ef4238',
                limit: 25,
                jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    page = obj.curr - 1;
                    console.log(page)
                    if (time == "1" && area == "1" && type == "1" && sign == "0") {
                $.ajax({
                    url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                    type: 'get',
                    dataType: 'json',
                    async:false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty();
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }
                        var str = ``;
                        for (var i = 0; i < data.length - 1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                                    <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                                    <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                                    <div class="score">${data[i].movieScore}</div>
                                </div>
                            `
                        }
                        // length = data.length - 1;
                        // id = data[data.length - 1].id;
                        // console.log(id);
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                        var parent = $('#imageOne');
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                    }
                })
            }


           
            else {
                $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/${page}/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    async:false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty()
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }

                        var str = ``;
                        for (var i = 0; i < data.length -
                            1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                        }
                        var parent = $('#imageOne');
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                    console.log(allPage)
                                }
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                    }
                })
            }
            
                    //首次不执行
                    if (!first) {
                        //do something
                    }
                }
            });

            }
            

            else if(status==3){
                laypage.render({
                elem: 'test3' //注意，这里的 test1 是 ID，不用加 # 号
                    ,
                count: allPageThree*25 //数据总数，从服务端得到
                    ,
                theme: '#ef4238',
                limit: 25,
                jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    page = obj.curr - 1;
                    console.log(page)
                    if (time == "1" && area == "1" && type == "1" && sign == "0") {
                $.ajax({
                    url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                    type: 'get',
                    dataType: 'json',
                    async:false,
                    contentType: 'application/json;charset=UTF-8',
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty();
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }
                        var str = ``;
                        for (var i = 0; i < data.length - 1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                                    <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                                    <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                                    <div class="score">${data[i].movieScore}</div>
                                </div>
                            `
                        }
                        // length = data.length - 1;
                        // id = data[data.length - 1].id;
                        // console.log(id);
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                }
                        var parent = $('#imageOne');
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                        $("#test1,#test2,#test3").css({"display":"none"});
                    }
                })
            }


           
            else {
                $.ajax({
                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/${page}/${sign}`,
                    type: 'get',
                    dataType: 'json',
                    contentType: 'application/json;charset=UTF-8',
                    async:false,
                    success: data => {
                        console.log(data);
                        $('#imageOne').empty()
                        $('.choose').empty()
                        var inputText1 = ''
                        var inputText2 = ''
                        inputText1 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                        inputText2 +=
                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                        var parent1 = $('.choose');
                        if (sign == "0") {
                            parent1.append(inputText2);
                        } else {
                            parent1.append(inputText1);
                        }

                        var str = ``;
                        for (var i = 0; i < data.length -
                            1; i++) {
                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                        }
                        var parent = $('#imageOne');
                        if (status == 2) {
                                    allPageTwo = data[data.length - 1].id + 1;
                                } else if (status == 3) {
                                    allPageThree = data[data.length - 1].id + 1;
                                } else {
                                    allPage = data[data.length - 1].id + 1;
                                    console.log(allPage)
                                }
                        parent.append(str);
                    },
                    error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                    }
                })
            }
            
                    //首次不执行
                    if (!first) {
                        //do something
                    }
                }
            });

            }

            else{
                console.log(allPage)
                laypage.render({
                                elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号
                                    ,
                                count: allPage*25 //数据总数，从服务端得到
                                    ,
                                theme: '#ef4238',
                                limit: 25,
                                jump: function (obj, first) {
                                    //obj包含了当前分页的所有参数，比如：
                                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                                    // console.log(obj.limit); //得到每页显示的条数
                                    page = obj.curr - 1;
                                    console.log(allPage);
                                    if (time == "1" && area == "1" && type == "1" && sign == "0") {
                                $.ajax({
                                    url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                                    type: 'get',
                                    dataType: 'json',
                                    async:false,
                                    contentType: 'application/json;charset=UTF-8',
                                    success: data => {
                                        console.log(data);
                                        $('#imageOne').empty();
                                        $('.choose').empty()
                                        var inputText1 = ''
                                        var inputText2 = ''
                                        inputText1 +=
                                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                                        inputText2 +=
                                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                                        var parent1 = $('.choose');
                                        if (sign == "0") {
                                            parent1.append(inputText2);
                                        } else {
                                            parent1.append(inputText1);
                                        }
                                        var str = ``;
                                        for (var i = 0; i < data.length - 1; i++) {
                                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                                                    <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                                                    <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                                                    <div class="score">${data[i].movieScore}</div>
                                                </div>
                                            `
                                        }
                                        // length = data.length - 1;
                                        // id = data[data.length - 1].id;
                                        // console.log(id);
                                        if (status == 2) {
                                                    allPageTwo = data[data.length - 1].id + 1;
                                                } else if (status == 3) {
                                                    allPageThree = data[data.length - 1].id + 1;
                                                } else {
                                                    allPage = data[data.length - 1].id + 1;
                                                }
                                        var parent = $('#imageOne');
                                        parent.append(str);
                                    },
                                    error: function (data) {

                                        var json = JSON.stringify(data);

                                        console.log(json);
                                        $('#imageOne').empty()
                                    }
                                })
                            }


                        
                            else {
                                $.ajax({
                                    url: `http://localhost:8080/getClassificationByType/${status}/${type}/${area}/${time}/${page}/${sign}`,
                                    type: 'get',
                                    dataType: 'json',
                                    async:false,
                                    contentType: 'application/json;charset=UTF-8',
                                    success: data => {
                                        console.log(data);
                                        $('#imageOne').empty()
                                        $('.choose').empty()
                                        var inputText1 = ''
                                        var inputText2 = ''
                                        inputText1 +=
                                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" >默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1" checked>按时间排序'
                                        inputText2 +=
                                            '<input type="radio" name="name" id="sortOne" class="radio" value="0" checked>默认排序<input type="radio"name="name" id="sortTwo" class="radio" value="1">按时间排序'
                                        var parent1 = $('.choose');
                                        if (sign == "0") {
                                            parent1.append(inputText2);
                                        } else {
                                            parent1.append(inputText1);
                                        }

                                        var str = ``;
                                        for (var i = 0; i < data.length -
                                            1; i++) {
                                            str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                                            <div class="score">${data[i].movieScore}</div>
                                        </div>
                                    `
                                        }
                                        var parent = $('#imageOne');
                                        if (status == 2) {
                                                    allPageTwo = data[data.length - 1].id + 1;
                                                } else if (status == 3) {
                                                    allPageThree = data[data.length - 1].id + 1;
                                                } else {
                                                    allPage = data[data.length - 1].id + 1;
                                                    console.log(allPage)
                                                }
                                        parent.append(str);
                                    },
                                    error: function (data) {

                                        var json = JSON.stringify(data);

                                        console.log(json);
                                        $('#imageOne').empty()
                                    }
                                })
                            }
                            
                                    //首次不执行
                                    if (!first) {
                                        //do something
                                    }
                                }
                            });
                        
            }
            //执行一个laypage实例
            
        });

 
        })

            
        layui.use('laypage', function () {
            var laypage = layui.laypage;



            laypage.render({
                elem: 'test2' //注意，这里的 test1 是 ID，不用加 # 号
                    ,
                count: allPageTwo*25 //数据总数，从服务端得到
                    ,
                theme: '#ef4238',
                limit: 25,
                jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    page = obj.curr - 1;
                    console.log(page)
                    $.ajax({
                        url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                        type: 'get',
                        dataType: 'json',
                        async:false,
                        contentType: 'application/json;charset=UTF-8',
                        success: data => {
                            console.log(data);
                            $('#imageOne').empty()
                            var str = ``;
                            for (var i = 0; i < data.length - 1; i++) {
                                str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                            }
                            length = data.length - 1;
                            id = data[data.length - 1].id;
                            // console.log(id);
                            var parent = $('#imageOne');
                            parent.append(str);
                        }, error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                        }
                    })

                    //首次不执行
                    if (!first) {
                        //do something
                    }
                }
            });




            laypage.render({
                elem: 'test3' //注意，这里的 test1 是 ID，不用加 # 号
                    ,
                count: allPageThree*25 //数据总数，从服务端得到
                    ,
                theme: '#ef4238',
                limit: 25,
                jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    page = obj.curr - 1;
                    console.log(page)
                    $.ajax({
                        url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                        type: 'get',
                        dataType: 'json',
                        async:false,
                        contentType: 'application/json;charset=UTF-8',
                        success: data => {
                            console.log(data);
                            $('#imageOne').empty()
                            var str = ``;
                            for (var i = 0; i < data.length - 1; i++) {
                                str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                            }
                            length = data.length - 1;
                            id = data[data.length - 1].id;
                            // console.log(id);
                            var parent = $('#imageOne');
                            parent.append(str);
                        }, error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                        }
                    })

                    //首次不执行
                    if (!first) {
                        //do something
                    }
                }
            });

            //执行一个laypage实例
            laypage.render({
                elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号
                    ,
                count: allPage*25 //数据总数，从服务端得到
                    ,
                theme: '#ef4238',
                limit: 25,
                jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    page = obj.curr - 1;
                    console.log(page)
                    $.ajax({
                        url: `http://localhost:8080/getMoviesByStatus/${status}/${page}`,
                        type: 'get',
                        dataType: 'json',
                        async:false,
                        contentType: 'application/json;charset=UTF-8',
                        success: data => {
                            console.log(data);
                            $('#imageOne').empty()
                            var str = ``;
                            for (var i = 0; i < data.length - 1; i++) {
                                str += `<div class="block" data-id="${data[i].id}" data-status="${data[i].movieStatus}">
                            <img src="${data[i].movieHead}" style="width: 160px;height: 220px;" >
                            <div class="information">
                            <span>类型：${data[i].movieType}</span>
                            <br>
                            <span>上映时间：${GetTime(data[i].movieStart).substring(0,10)}</span>

                        </div>
                            <div class="score">${data[i].movieScore}</div>
                        </div>
                    `
                            }
                            length = data.length - 1;
                            id = data[data.length - 1].id;
                            // console.log(id);
                            var parent = $('#imageOne');
                            parent.append(str);
                        }, error: function (data) {

                        var json = JSON.stringify(data);

                        console.log(json);
                        $('#imageOne').empty()
                        }
                    })

                    //首次不执行
                    if (!first) {
                        //do something
                    }
                }
            });
        });



        
        localStorage.removeItem("movieInformation")
        $('body').on('click', '.block', function () {
            var id = $(this).attr('data-id');
            var status = $(this).attr('data-status');
            console.log(id);
            console.log(status);
            var str = {
                "id": id,
                "status": status
            }
            sessionStorage.setItem('movieInformation', JSON.stringify(str));
            window.open("movieIntroduce.html");
        })
    </script>
    <script src="../static/js/header.js"></script>
    <!-- <script src="../node_modules/jQuery/dist/jquery.js"></script> -->
<script src="../static/js/header.js"></script>
</body>

</html>